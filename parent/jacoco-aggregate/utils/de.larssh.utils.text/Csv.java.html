<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>Csv.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Parent POM</a> &gt; <a href="../index.html" class="el_bundle">utils</a> &gt; <a href="index.source.html" class="el_package">de.larssh.utils.text</a> &gt; <span class="el_source">Csv.java</span></div><h1>Csv.java</h1><pre class="source lang-java linenums">// Generated by delombok at Mon May 10 15:38:32 UTC 2021
package de.larssh.utils.text;

import static java.util.Collections.emptyList;
import java.io.IOException;
import java.io.Reader;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import de.larssh.utils.Finals;
import de.larssh.utils.Nullables;
import de.larssh.utils.collection.ProxiedList;
import edu.umd.cs.findbugs.annotations.CheckForNull;
import edu.umd.cs.findbugs.annotations.NonNull;
import edu.umd.cs.findbugs.annotations.Nullable;
import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;

/**
 * This class represents CSV data, consisting of rows of values, implementing
 * {@code List&lt;String&gt;} for convenience reasons.
 *
 * &lt;p&gt;
 * The first row is referenced as &lt;i&gt;header&lt;/i&gt; row and {@link CsvRow} instances
 * allow to retrieve their values by the column's CSV header value.
 *
 * &lt;p&gt;
 * Instances of this class can be marked unmodifiable using
 * {@link #unmodifiable()}. Afterwards applying modifying actions on that
 * instance results in an {@link UnsupportedOperationException}.
 */
@SuppressWarnings(&quot;PMD.ShortClassName&quot;)
public class Csv extends ProxiedList&lt;CsvRow&gt; {
	/**
	 * The default CSV escape character
	 */
<span class="nc" id="L36">	public static final char DEFAULT_ESCAPER = Finals.constant('\&quot;');</span>
	/**
	 * The default CSV separator character
	 */
<span class="nc" id="L40">	public static final char DEFAULT_SEPARATOR = Finals.constant(',');</span>

	/**
	 * Parses the CSV data given by {@code reader}, starting at the current
	 * position.
	 *
	 * @param reader    a {@link Reader} as CSV data input
	 * @param separator the CSV separator character
	 * @param escaper   the CSV escaping character
	 * @return an object representing the parsed CSV data
	 * @throws IllegalArgumentException on illegal {@code separator} or
	 *                                  {@code escaper} value
	 * @throws IOException              if an I/O error occurs
	 */
	public static Csv parse(final Reader reader, final char separator, final char escaper) throws IOException {
<span class="nc" id="L55">		return new CsvParser(separator, escaper).parse(reader);</span>
	}

	/**
	 * Flag specifying if this instance can be modified
	 */
<span class="nc" id="L61">	private boolean modifiable = true;</span>

	/**
	 * This class represents CSV data, consisting of rows of values, implementing
	 * {@code List&lt;String&gt;} for convenience reasons.
	 *
	 * &lt;p&gt;
	 * The first row is referenced as &lt;i&gt;header&lt;/i&gt; row and {@link CsvRow} instances
	 * allow to retrieve their values by the column's CSV header value.
	 */
	public Csv() {
<span class="nc" id="L72">		super(new ArrayList&lt;&gt;());</span>
<span class="nc" id="L73">	}</span>

	/**
	 * This class represents CSV data, consisting of rows of values, implementing
	 * {@code List&lt;String&gt;} for convenience reasons.
	 *
	 * &lt;p&gt;
	 * The first row is referenced as &lt;i&gt;header&lt;/i&gt; row and {@link CsvRow} instances
	 * allow to retrieve their values by the column's CSV header value.
	 *
	 * @param initialCapacity an initial capacity of the internal list
	 * @throws IllegalArgumentException if the specified initial capacity is
	 *                                  negative
	 */
	public Csv(final int initialCapacity) {
<span class="nc" id="L88">		super(new ArrayList&lt;&gt;(initialCapacity));</span>
<span class="nc" id="L89">	}</span>

	/**
	 * This class represents CSV data, consisting of rows of values, implementing
	 * {@code List&lt;String&gt;} for convenience reasons.
	 *
	 * &lt;p&gt;
	 * The first row is referenced as &lt;i&gt;header&lt;/i&gt; row and {@link CsvRow} instances
	 * allow to retrieve their values by the column's CSV header value.
	 *
	 * @param data a collection containing CSV rows to be added
	 */
	@SuppressWarnings(&quot;PMD.AvoidInstantiatingObjectsInLoops&quot;)
	@SuppressFBWarnings(value = &quot;PCOA_PARTIALLY_CONSTRUCTED_OBJECT_ACCESS&quot;, justification = &quot;passing this object to CsvRow constructor shouldn\'t be a problem&quot;)
	public Csv(final List&lt;? extends List&lt;String&gt;&gt; data) {
<span class="nc" id="L104">		this(data.size());</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">		for (final List&lt;String&gt; row : Nullables.orElseThrow(data)) {</span>
<span class="nc" id="L106">			super.add(new CsvRow(this, size(), Nullables.orElseThrow(row)));</span>
<span class="nc" id="L107">		}</span>
<span class="nc" id="L108">	}</span>

	/**
	 * {@inheritDoc}
	 */
	@Override
	public boolean add(@Nullable final CsvRow element) {
<span class="nc" id="L115">		return add((List&lt;String&gt;) Nullables.orElseThrow(element));</span>
	}

	/**
	 * Adds the specified CSV row to the this CSV object.
	 *
	 * @param element the CSV row to be added
	 * @return {@code true}
	 * @throws UnsupportedOperationException if this CSV object is unmodifiable
	 */
	public boolean add(final List&lt;String&gt; element) {
<span class="nc" id="L126">		return getListIfModifiable().add(new CsvRow(this, size(), element));</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	@SuppressWarnings(&quot;unused&quot;)
	public void add(final int index, @Nullable final CsvRow element) {
<span class="nc" id="L135">		throw new UnsupportedOperationException();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public boolean addAll(@Nullable final Collection&lt;? extends CsvRow&gt; collection) {
<span class="nc" id="L143">		return addAllList(Nullables.orElseThrow(collection));</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	@SuppressWarnings(&quot;unused&quot;)
	public boolean addAll(final int index, @Nullable final Collection&lt;? extends CsvRow&gt; collection) {
<span class="nc" id="L152">		throw new UnsupportedOperationException();</span>
	}

	/**
	 * Adds all of the CSV rows in {@code collection} to this CSV object.
	 *
	 * &lt;p&gt;
	 * The behavior of this operation is undefined if the specified collection is
	 * modified while the operation is in progress. (This implies, that the behavior
	 * of this call is undefined if the specified collection is this CSV object, and
	 * this CSV object is non-empty.)
	 *
	 * @param collection the collection containing CSV rows to be added
	 * @return {@code true} if this CSV object changed as a result of the call, else
	 *         {@code false}
	 * @throws UnsupportedOperationException if this CSV object is unmodifiable
	 */
	public boolean addAllList(final Collection&lt;? extends List&lt;String&gt;&gt; collection) {
<span class="nc" id="L170">		boolean modified = false;</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">		for (final List&lt;String&gt; row : collection) {</span>
<span class="nc" id="L172">			modified |= add(row);</span>
<span class="nc" id="L173">		}</span>
<span class="nc" id="L174">		return modified;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public boolean equals(@CheckForNull final Object object) {
<span class="nc" id="L182">		return getList().equals(object);</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@NonNull
	@Override
	public CsvRow get(final int index) {
<span class="nc" id="L191">		return getList().get(index);</span>
	}

	/**
	 * Returns the headers of this CSV object. Headers are specified by the first
	 * row. If this CSV object is empty, an empty list is returned.
	 *
	 * @return the headers of this CSV object
	 */
	public List&lt;String&gt; getHeaders() {
<span class="nc bnc" id="L201" title="All 2 branches missed.">		return isEmpty() ? emptyList() : get(0);</span>
	}

	/**
	 * Verifies if this object is modifiable and either returns the wrapped list or
	 * throws an appropriate exception.
	 *
	 * @return the wrapped list if this object is modifiable
	 * @throws UnsupportedOperationException if this object is unmodifiable
	 */
	private List&lt;CsvRow&gt; getListIfModifiable() {
<span class="nc bnc" id="L212" title="All 2 branches missed.">		if (isModifiable()) {</span>
<span class="nc" id="L213">			return getList();</span>
		}
<span class="nc" id="L215">		throw new UnsupportedOperationException();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public int hashCode() {
<span class="nc" id="L223">		return getList().hashCode();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@NonNull
	@Override
	public CsvRow remove(final int index) {
<span class="nc bnc" id="L232" title="All 2 branches missed.">		if (index == size() - 1) {</span>
<span class="nc" id="L233">			return Nullables.orElseThrow(super.remove(index));</span>
		}
<span class="nc" id="L235">		throw new UnsupportedOperationException();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@NonNull
	@Override
	public CsvRow set(final int index, @Nullable final CsvRow element) {
<span class="nc" id="L244">		return getListIfModifiable().set(index, new CsvRow(this, index, Nullables.orElseThrow(element)));</span>
	}

	/**
	 * Returns a valid CSV string representation of this object using the default
	 * separator and escaper.
	 *
	 * @return a valid CSV representation of this object using default separator and
	 *         escaper
	 */
	@Override
	public String toString() {
<span class="nc" id="L256">		return toString(DEFAULT_SEPARATOR, Csv.DEFAULT_ESCAPER);</span>
	}

	/**
	 * Returns a valid CSV string representation of this object using
	 * {@code separator} and {@code escaper}.
	 *
	 * &lt;p&gt;
	 * This is a short-hand method for
	 * {@link StringConverters#encodeCsv(Collection, char, char)}.
	 *
	 * @param separator the CSV separator
	 * @param escaper   the CSV value escaper
	 * @return a valid CSV representation of this object using {@code separator} and
	 *         {@code escaper}
	 */
	public String toString(final char separator, final char escaper) {
<span class="nc" id="L273">		return StringConverters.encodeCsv(this, separator, escaper);</span>
	}

	/**
	 * Marks the CSV object as unmodifiable
	 *
	 * @return this objects
	 */
	public Csv unmodifiable() {
<span class="nc" id="L282">		modifiable = false;</span>
<span class="nc" id="L283">		return this;</span>
	}

	/**
	 * Flag specifying if this instance can be modified
	 *
	 * @return {@code true} if this instance is modifiable, else {@code false}
	 */
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public boolean isModifiable() {
		return this.modifiable;
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>